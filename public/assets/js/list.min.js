/******/ (() => { // webpackBootstrap
/*!******************************!*\
  !*** ./resources/js/list.js ***!
  \******************************/
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
// Função para alternar dropdowns (deve estar no escopo global)
function toggleDropdown(id) {
  var dropdown = document.getElementById(id);
  dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
}

// Expor a função no escopo global para uso em onclick
window.toggleDropdown = toggleDropdown;

// Função para aplicar filtros
function applyFilters() {
  var currentUrl = new URL(window.location);
  var params = new URLSearchParams(currentUrl.search);

  // Limpar parâmetros de página ao aplicar filtros
  params["delete"]('page');

  // Filtro de preço
  var priceSlider = document.getElementById('priceSlider');
  if (priceSlider) {
    params.set('price_max', priceSlider.value);
  }

  // Filtro de ordenação
  var sortSelect = document.getElementById('sortSelectOrdenar');
  if (sortSelect && sortSelect.dataset.sort) {
    params.set('sort', sortSelect.dataset.sort);
  }

  // Filtro de time
  var teamSelect = document.getElementById('sortSelectTime');
  if (teamSelect && teamSelect.dataset.team !== undefined) {
    if (teamSelect.dataset.team && teamSelect.dataset.team !== '') {
      params.set('team', teamSelect.dataset.team);
    } else {
      params["delete"]('team');
    }
  }

  // Filtro de temporada
  var seasonSelect = document.getElementById('sortSelectTemporada');
  if (seasonSelect && seasonSelect.dataset.season !== undefined) {
    if (seasonSelect.dataset.season && seasonSelect.dataset.season !== '') {
      params.set('season', seasonSelect.dataset.season);
    } else {
      params["delete"]('season');
    }
  }

  // Filtro de tipo de produto
  var productTypeSelect = document.getElementById('sortSelectTipo');
  if (productTypeSelect && productTypeSelect.dataset.productType !== undefined) {
    if (productTypeSelect.dataset.productType && productTypeSelect.dataset.productType !== '') {
      params.set('product_type', productTypeSelect.dataset.productType);
    } else {
      params["delete"]('product_type');
    }
  }
  var checkboxFilters = {
    'gender': document.querySelectorAll('input[type="checkbox"][value="masculine"], input[type="checkbox"][value="feminine"], input[type="checkbox"][value="unisex"], input[type="checkbox"][value="kids"]'),
    'size': document.querySelectorAll('input[type="checkbox"][value="P"], input[type="checkbox"][value="M"], input[type="checkbox"][value="G"], input[type="checkbox"][value="GG"]'),
    'category': document.querySelectorAll('input[type="checkbox"][value="Retro"], input[type="checkbox"][value="torcedor"], input[type="checkbox"][value="jogador"], input[type="checkbox"][value="treino"]'),
    'national_international': document.querySelectorAll('input[type="checkbox"][value="Sim"], input[type="checkbox"][value="Não"]')
  };
  Object.entries(checkboxFilters).forEach(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
      param = _ref2[0],
      checkboxes = _ref2[1];
    var checkedValues = Array.from(checkboxes).filter(function (cb) {
      return cb.checked;
    }).map(function (cb) {
      return cb.value;
    });
    if (checkedValues.length > 0) {
      params.set(param, checkedValues.join(','));
    } else {
      params["delete"](param);
    }
  });

  // Redirecionar com os novos filtros
  window.location.href = currentUrl.pathname + '?' + params.toString();
}

// Adiciona listeners para todas as dropdowns
function setupDropdown(dropdownId, buttonId, dataAttribute) {
  var links = document.querySelectorAll("#".concat(dropdownId, " a"));
  links.forEach(function (link) {
    link.addEventListener("click", function (e) {
      e.preventDefault();
      var selectedText = this.textContent;
      var selectedValue = this.getAttribute(dataAttribute);
      var button = document.getElementById(buttonId);
      button.childNodes[0].nodeValue = selectedText + " ";
      button.dataset[dataAttribute.replace('data-', '')] = selectedValue;
      document.getElementById(dropdownId).style.display = "none";
      applyFilters();
    });
  });
}

// Função para atualizar indicadores visuais de filtros ativos
function updateActiveFilterIndicators() {
  var hasAnyActiveFilters = false;

  // Atualizar indicadores de checkboxes
  document.querySelectorAll('.filter-group.checkbox').forEach(function (group) {
    var checkboxes = group.querySelectorAll('input[type="checkbox"]');
    var hasActiveFilters = Array.from(checkboxes).some(function (cb) {
      return cb.checked;
    });
    if (hasActiveFilters) {
      group.classList.add('has-active-filters');
      hasAnyActiveFilters = true;
    } else {
      group.classList.remove('has-active-filters');
    }
  });

  // Atualizar indicadores de dropdowns
  var dropdowns = [{
    id: 'sortSelectOrdenar',
    param: 'sort'
  }, {
    id: 'sortSelectTime',
    param: 'team'
  }, {
    id: 'sortSelectTemporada',
    param: 'season'
  }, {
    id: 'sortSelectTipo',
    param: 'product_type'
  }];
  dropdowns.forEach(function (dropdown) {
    var element = document.getElementById(dropdown.id);
    var currentValue = new URLSearchParams(window.location.search).get(dropdown.param);

    // Considerar ativo apenas se houver valor e não for o valor padrão
    var isActive = currentValue && currentValue !== '' && currentValue !== 'most_sold' && currentValue !== '2023/24' && currentValue !== 'uniforme';
    if (isActive) {
      element.classList.add('active');
      hasAnyActiveFilters = true;
    } else {
      element.classList.remove('active');
    }
  });

  // Atualizar indicador do slider de preço
  var priceSlider = document.getElementById('priceSlider');
  var currentPriceMax = new URLSearchParams(window.location.search).get('price_max');
  if (priceSlider && currentPriceMax && currentPriceMax !== '250') {
    priceSlider.parentElement.classList.add('has-active-filters');
    hasAnyActiveFilters = true;
  } else {
    priceSlider.parentElement.classList.remove('has-active-filters');
  }

  // Mostrar/ocultar botão "Limpar Filtros"
  var clearFiltersBtn = document.getElementById('clearFilters');
  if (clearFiltersBtn) {
    if (hasAnyActiveFilters) {
      clearFiltersBtn.style.display = 'inline-block';
    } else {
      clearFiltersBtn.style.display = 'none';
    }
  }
}

// Função para configurar o slider de preço
function setupPriceSlider() {
  var slider = document.querySelector(".price-slider");
  var priceRange = document.getElementById("priceRange");
  if (!slider || !priceRange) return;
  function updateSliderTrack() {
    var min = parseInt(slider.min);
    var max = parseInt(slider.max);
    var value = parseInt(slider.value);
    var percentage = (value - min) / (max - min) * 100;
    slider.style.background = "linear-gradient(to right, #ff6600 ".concat(percentage, "%, #ddd ").concat(percentage, "%)");
    priceRange.textContent = "R$ 50 - R$ ".concat(value);
  }
  slider.addEventListener("input", updateSliderTrack);

  // Aplicar filtro após o usuário parar de arrastar o slider
  var timeout;
  slider.addEventListener("change", function () {
    clearTimeout(timeout);
    timeout = setTimeout(applyFilters, 500);
  });

  // Atualizar ao carregar a página
  updateSliderTrack();
}

// ===========================================
// MOBILE FUNCTIONALITY
// ===========================================

// Mobile filter sidebar functions
function openMobileFilter() {
  var overlay = document.getElementById('mobileFilterOverlay');
  var sidebar = document.getElementById('mobileFilterSidebar');
  if (overlay && sidebar) {
    overlay.style.display = 'block';
    sidebar.classList.add('active');
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
}
function closeMobileFilter() {
  var overlay = document.getElementById('mobileFilterOverlay');
  var sidebar = document.getElementById('mobileFilterSidebar');
  if (overlay && sidebar) {
    overlay.classList.remove('active');
    sidebar.classList.remove('active');
    setTimeout(function () {
      overlay.style.display = 'none';
    }, 300);
    document.body.style.overflow = '';
  }
}

// Mobile sort dropdown functions
function toggleMobileSortDropdown() {
  var dropdown = document.getElementById('mobileSortDropdown');
  if (dropdown) {
    dropdown.classList.toggle('active');
  }
}
function closeMobileSortDropdown() {
  var dropdown = document.getElementById('mobileSortDropdown');
  if (dropdown) {
    dropdown.classList.remove('active');
  }
}

// Mobile filter count update
function updateMobileFilterCount() {
  var countElement = document.getElementById('mobileFilterCount');
  if (!countElement) return;
  var count = 0;
  var urlParams = new URLSearchParams(window.location.search);

  // Count active filters
  var filterParams = ['sort', 'team', 'season', 'product_type', 'price_max', 'gender', 'size', 'category', 'national_international'];
  filterParams.forEach(function (param) {
    var value = urlParams.get(param);
    if (value && value !== '' && value !== 'most_sold' && value !== '250') {
      count++;
    }
  });
  countElement.textContent = count;
  countElement.style.display = count > 0 ? 'inline-block' : 'none';
}

// Mobile filter application
function applyMobileFilters() {
  var currentUrl = new URL(window.location);
  var params = new URLSearchParams(currentUrl.search);

  // Clear page parameter
  params["delete"]('page');

  // Get mobile filter values
  var mobilePriceSlider = document.getElementById('mobilePriceSlider');
  if (mobilePriceSlider) {
    params.set('price_max', mobilePriceSlider.value);
  }

  // Get mobile dropdown values
  var mobileDropdowns = [{
    id: 'mobileSortSelectOrdenar',
    param: 'sort',
    dataAttr: 'sort'
  }, {
    id: 'mobileSortSelectTime',
    param: 'team',
    dataAttr: 'team'
  }, {
    id: 'mobileSortSelectTemporada',
    param: 'season',
    dataAttr: 'season'
  }, {
    id: 'mobileSortSelectTipo',
    param: 'product_type',
    dataAttr: 'productType'
  }];
  mobileDropdowns.forEach(function (dropdown) {
    var element = document.getElementById(dropdown.id);
    if (element && element.dataset[dropdown.dataAttr] !== undefined) {
      var value = element.dataset[dropdown.dataAttr];
      if (value && value !== '') {
        params.set(dropdown.param, value);
      } else {
        params["delete"](dropdown.param);
      }
    }
  });

  // Get mobile checkbox values
  var mobileCheckboxFilters = {
    'gender': document.querySelectorAll('#mobileFilterSidebar input[type="checkbox"][value="masculine"], #mobileFilterSidebar input[type="checkbox"][value="feminine"], #mobileFilterSidebar input[type="checkbox"][value="unisex"], #mobileFilterSidebar input[type="checkbox"][value="kids"]'),
    'size': document.querySelectorAll('#mobileFilterSidebar input[type="checkbox"][value="P"], #mobileFilterSidebar input[type="checkbox"][value="M"], #mobileFilterSidebar input[type="checkbox"][value="G"], #mobileFilterSidebar input[type="checkbox"][value="GG"]'),
    'category': document.querySelectorAll('#mobileFilterSidebar input[type="checkbox"][value="Retro"], #mobileFilterSidebar input[type="checkbox"][value="torcedor"], #mobileFilterSidebar input[type="checkbox"][value="jogador"], #mobileFilterSidebar input[type="checkbox"][value="treino"]'),
    'national_international': document.querySelectorAll('#mobileFilterSidebar input[type="checkbox"][value="Sim"], #mobileFilterSidebar input[type="checkbox"][value="Não"]')
  };
  Object.entries(mobileCheckboxFilters).forEach(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 2),
      param = _ref4[0],
      checkboxes = _ref4[1];
    var checkedValues = Array.from(checkboxes).filter(function (cb) {
      return cb.checked;
    }).map(function (cb) {
      return cb.value;
    });
    if (checkedValues.length > 0) {
      params.set(param, checkedValues.join(','));
    } else {
      params["delete"](param);
    }
  });

  // Redirect with new filters
  window.location.href = currentUrl.pathname + '?' + params.toString();
}

// Mobile sort application
function applyMobileSort(sortValue) {
  var currentUrl = new URL(window.location);
  var params = new URLSearchParams(currentUrl.search);
  if (sortValue && sortValue !== 'most_sold') {
    params.set('sort', sortValue);
  } else {
    params["delete"]('sort');
  }
  params["delete"]('page');
  window.location.href = currentUrl.pathname + '?' + params.toString();
}

// Mobile price slider setup
function setupMobilePriceSlider() {
  var slider = document.getElementById('mobilePriceSlider');
  var priceRange = document.getElementById('mobilePriceRange');
  if (!slider || !priceRange) return;
  function updateMobileSliderTrack() {
    var min = parseInt(slider.min);
    var max = parseInt(slider.max);
    var value = parseInt(slider.value);
    var percentage = (value - min) / (max - min) * 100;
    slider.style.background = "linear-gradient(to right, #ff6600 ".concat(percentage, "%, #ddd ").concat(percentage, "%)");
    priceRange.textContent = "R$ 50 - R$ ".concat(value);
  }
  slider.addEventListener("input", updateMobileSliderTrack);
  updateMobileSliderTrack();
}

// Setup mobile dropdowns
function setupMobileDropdown(dropdownId, buttonId, dataAttribute) {
  var links = document.querySelectorAll("#".concat(dropdownId, " a"));
  links.forEach(function (link) {
    link.addEventListener("click", function (e) {
      e.preventDefault();
      var selectedText = this.textContent;
      var selectedValue = this.getAttribute(dataAttribute);
      var button = document.getElementById(buttonId);
      if (button) {
        button.childNodes[0].nodeValue = selectedText + " ";
        button.dataset[dataAttribute.replace('data-', '')] = selectedValue;
      }
      document.getElementById(dropdownId).style.display = "none";
    });
  });
}

// ===========================================
// INITIALIZATION
// ===========================================

// Inicialização quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', function () {
  // Configurar dropdowns desktop
  setupDropdown("dropdownMenu", "sortSelectOrdenar", "data-sort");
  setupDropdown("dropdownTemporada", "sortSelectTemporada", "data-season");
  setupDropdown("dropdownTime", "sortSelectTime", "data-team");
  setupDropdown("dropdownTipo", "sortSelectTipo", "data-product-type");

  // Configurar dropdowns mobile
  setupMobileDropdown("mobileDropdownMenu", "mobileSortSelectOrdenar", "data-sort");
  setupMobileDropdown("mobileDropdownTemporada", "mobileSortSelectTemporada", "data-season");
  setupMobileDropdown("mobileDropdownTime", "mobileSortSelectTime", "data-team");
  setupMobileDropdown("mobileDropdownTipo", "mobileSortSelectTipo", "data-product-type");

  // Adicionar listeners para checkboxes desktop
  document.querySelectorAll('.filter input[type="checkbox"]').forEach(function (checkbox) {
    checkbox.addEventListener('change', applyFilters);
  });

  // Adicionar listeners para checkboxes mobile
  document.querySelectorAll('#mobileFilterSidebar input[type="checkbox"]').forEach(function (checkbox) {
    checkbox.addEventListener('change', function () {
      // Don't auto-apply on mobile, wait for user to click "Apply"
    });
  });

  // Configurar fechamento de dropdowns ao clicar fora
  document.addEventListener("click", function (event) {
    var allDropdowns = ["dropdownMenu", "dropdownTemporada", "dropdownTime", "dropdownTipo"];
    var allButtons = ["sortSelectOrdenar", "sortSelectTemporada", "sortSelectTime", "sortSelectTipo"];
    allDropdowns.forEach(function (id, index) {
      var dropdown = document.getElementById(id);
      var button = document.getElementById(allButtons[index]);
      if (dropdown && button && !button.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.style.display = "none";
      }
    });

    // Close mobile sort dropdown
    if (!event.target.closest('.mobile-sort-bar')) {
      closeMobileSortDropdown();
    }
  });

  // Atualizar indicadores visuais
  updateActiveFilterIndicators();
  updateMobileFilterCount();

  // Inicializar o valor do time no dropdown se houver um filtro ativo
  var currentTeam = new URLSearchParams(window.location.search).get('team');
  if (currentTeam) {
    var teamSelect = document.getElementById('sortSelectTime');
    var mobileTeamSelect = document.getElementById('mobileSortSelectTime');
    if (teamSelect) {
      teamSelect.dataset.team = currentTeam;
    }
    if (mobileTeamSelect) {
      mobileTeamSelect.dataset.team = currentTeam;
    }
  }

  // Adicionar listener para o botão de limpar filtros desktop
  var clearFiltersBtn = document.getElementById('clearFilters');
  if (clearFiltersBtn) {
    clearFiltersBtn.addEventListener('click', function () {
      var currentUrl = new URL(window.location);
      window.location.href = currentUrl.pathname;
    });
  }

  // Configurar slider de preço desktop
  setupPriceSlider();

  // Configurar slider de preço mobile
  setupMobilePriceSlider();

  // ===========================================
  // MOBILE EVENT LISTENERS
  // ===========================================

  // Mobile filter toggle
  var mobileFilterToggle = document.getElementById('mobileFilterToggle');
  if (mobileFilterToggle) {
    mobileFilterToggle.addEventListener('click', openMobileFilter);
  }

  // Mobile filter close
  var closeMobileFilterBtn = document.getElementById('closeMobileFilter');
  var mobileFilterOverlay = document.getElementById('mobileFilterOverlay');
  if (closeMobileFilterBtn) {
    closeMobileFilterBtn.addEventListener('click', closeMobileFilter);
  }
  if (mobileFilterOverlay) {
    mobileFilterOverlay.addEventListener('click', closeMobileFilter);
  }

  // Mobile filter actions
  var mobileClearFiltersBtn = document.getElementById('mobileClearFilters');
  var mobileApplyFiltersBtn = document.getElementById('mobileApplyFilters');
  if (mobileClearFiltersBtn) {
    mobileClearFiltersBtn.addEventListener('click', function () {
      var currentUrl = new URL(window.location);
      window.location.href = currentUrl.pathname;
    });
  }
  if (mobileApplyFiltersBtn) {
    mobileApplyFiltersBtn.addEventListener('click', applyMobileFilters);
  }

  // Mobile sort toggle
  var mobileSortToggle = document.getElementById('mobileSortToggle');
  if (mobileSortToggle) {
    mobileSortToggle.addEventListener('click', function (e) {
      e.stopPropagation();
      toggleMobileSortDropdown();
    });
  }

  // Mobile sort options
  var mobileSortOptions = document.querySelectorAll('.mobile-sort-dropdown .sort-option');
  mobileSortOptions.forEach(function (option) {
    option.addEventListener('click', function (e) {
      e.preventDefault();
      var sortValue = this.getAttribute('data-sort');
      applyMobileSort(sortValue);
    });
  });

  // Close mobile filter on escape key
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      closeMobileFilter();
      closeMobileSortDropdown();
    }
  });
});
/******/ })()
;